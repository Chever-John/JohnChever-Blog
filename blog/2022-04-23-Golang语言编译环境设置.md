---
slug: Golang语言编译环境设置
title: Golang语言编译环境设置
authors: CheverJohn
tags: [Golang]
---

# Golang语言编译环境设置

## GOROOT

环境变量`GOROOT`表示 Go 语言的安装目录



在 `windows` 中, `GOROOT`的默认值是 `C:/go`， 而在 macOS 或 linux 中 `GOROOT` 的默认值是 `usr/local/go`，如果将 Go 安装在其他目录中，而需要将 `GOROOT`的值修改为对应的目录。

另外， `GOROOT/bin` 则包含 Go 为我们提供的工具链，因此，应该将 `GOROOT/bin` 配置到环境变量 PATH 中，方便我们在全局中使用 Go 工具链。



### Linux 设置 GOROOT 演示

```bash
export GOROOT=~/go
export PATH=$PATH:$GOROOT/bin
```



## GOPATH

> 注意，GOPATH 的值不能与 GOROOT 相同

环境变量 `GOPATH` 用于指定我们的开发工作区(workspace)，是存放源代码、测试文件、库静态文件、可执行文件的工作。

在`类Unix`(Mac OS或Linux)操作系统中`GOPATH`的默认值是`$home/go`。而在Windows中`GOPATH`的默认值则为`%USERPROFILE%\go`(比如在Admin用户，其值为`C:\Users\Admin\go`)。

当然，我们可以通过修改`GOPATH`来更换工作区，比如将工作设置`opt/go`方式如下：

### Linux 设置 GOPATH 演示

```bash
export GOPATH=/opt/go
```

还有，可以在GOPATH中设置多个工作区，如：

```bash
export GOPATH=/opt/go;$home/go
```

##### GOPATH的子目录

上面的代码表示我们指定两个工作区，不过当我们使用`go get`命令去获取远程库的时候，一般会安装到第一个工作区当中。

按照Go开发规范，`GOPATH`目录下的每个工作一般分为三个子目录：`src`、`pkg`、`bin`，所以我们看到的每个工作区是这样子的：

所以我们看到的工作区如下

```sh
bin/
    hello                          # command executable 可执行文件
    outyet                         # command executable 可执行文件
src/
    golang.org/x/example/
        .git/                      # Git repository metadata git仓库元数据
	hello/
	    hello.go               			 # command source 命令行代码
	outyet/
	    main.go                			 # command source 命令行代码
	    main_test.go           			 # test source		测试代码
	stringutil/
	    reverse.go             			 # package source 库文件
	    reverse_test.go        			 # test source		库文件
    golang.org/x/image/
        .git/                      # Git repository metadata git仓库元数据
	bmp/
	    reader.go              			 # package source 库文件
	    writer.go             			 # package source 库文件
    ... (many more repositories and packages omitted) ...
```



`src`目录放的是我们开发的源代码文件，其下面对应的目录称为**包**，`pkg`放的是编译后的库静态文件，`bin`放的是源代码编译后台的可执行文件。



## GOBIN

环境变量`GOBIN`表示我们开发程序编译后二进制命令的安装目录。

当我们使用`go install`命令编译和打包应用程序时，该命令会将编译后二进制程序打包GOBIN目录，一般我们将GOBIN设置为`GOPATH/bin`目录。

### Linux设置GOBIN演示

```bash
export GOBIN=$GOPATH/bin
```

### 交叉编译

什么是交叉编译？所谓的交叉编译，是指在一个平台上就能生成可以在另一个平台运行的代码，例如，我们可以32位的Windows操作系统开发环境上，生成可以在64位Linux操作系统上运行的二进制程序。

在其他编程语言中进行交叉编译可能要借助第三方工具，但在Go语言进行交叉编译非常简单，最简单只需要设置GOOS和GOARCH这两个环境变量就可以了。

### GOOS与GOARCH

GOOS的默认值是我们当前的操作系统， 如果windows，linux,注意mac os操作的上的值是darwin。 GOARCH则表示CPU架构，如386，amd64,arm等。

### 获取GOOS和GOARCH的值

我们可以使用`go env`命令获取当前GOOS和GOARCH的值。

```bash
go env GOOS GOARCH
```

### GOOS和GOARCH的取值范围

GOOS和GOARCH的值成对出现，而且只能是下面列表对应的值。

| $GOOS     | $GOARCH  |
| --------- | -------- |
| android   | arm      |
| darwin    | 386      |
| darwin    | amd64    |
| darwin    | arm      |
| darwin    | arm64    |
| dragonfly | amd64    |
| freebsd   | 386      |
| freebsd   | amd64    |
| freebsd   | arm      |
| linux     | 386      |
| linux     | amd64    |
| linux     | arm      |
| linux     | arm64    |
| linux     | ppc64    |
| linux     | ppc64le  |
| linux     | mips     |
| linux     | mipsle   |
| linux     | mips64   |
| linux     | mips64le |
| linux     | s390x    |
| netbsd    | 386      |
| netbsd    | amd64    |
| netbsd    | arm      |
| openbsd   | 386      |
| openbsd   | amd64    |
| openbsd   | arm      |
| plan9     | 386      |
| plan9     | amd64    |
| solaris   | amd64    |
| windows   | 386      |
| windows   | amd64    |

### 示例

#### 编译在 64 位 Linux 操作系统上运行的目标程序

```bash
GOOS=linux GOARCH=amd64 go build main.go
```

#### 编译在 arm 架构 Android 操作上的目标程序

```bash
GOOS=android GOARCH=arm GOARM=7 go build main.go
```

#### 环境变量列表

虽然我们一般虽然配置的环境变量就那么几个，但其实Go语言是提供了非常多的环境变量，让我们可以自由地定制开发和编译器行为。

下面是Go提供的所有的环境变量列表，一般可以划分为下面几大类，大概了解一下就可以了，因为有些环境变量我们可以永远都不会用到。

#### 通过环境变量

```bash
GCCGO
GOARCH
GOBIN
GOCACHE
GOFLAGS
GOOS
GOPATH
GOPROXY
GORACE
GOROOT
GOTMPDIR
```

#### 和cgo一起使用的环境变量

```bash
CC
CGO_ENABLED
CGO_CFLAGS
CGO_CFLAGS_ALLOW
CGO_CFLAGS_DISALLOW
CGO_CPPFLAGS, CGO_CPPFLAGS_ALLOW, CGO_CPPFLAGS_DISALLOW
CGO_CXXFLAGS, CGO_CXXFLAGS_ALLOW, CGO_CXXFLAGS_DISALLOW
CGO_FFLAGS, CGO_FFLAGS_ALLOW, CGO_FFLAGS_DISALLOW
CGO_LDFLAGS, CGO_LDFLAGS_ALLOW, CGO_LDFLAGS_DISALLOW
CXX
PKG_CONFIG
AR
```

#### 与系统架构体系相关的环境变量

```bash
GOARM
GO386
GOMIPS
GOMIPS64
```

#### 专用的环境变量

```bash
GCCGOTOOLDIR
GOROOT_FINAL
GO_EXTLINK_ENABLED
GIT_ALLOW_PROTOCOL
```

#### 其他环境变量

```bash
GOEXE
GOHOSTARCH
GOHOSTOS
GOMOD
GOTOOLDIR
```